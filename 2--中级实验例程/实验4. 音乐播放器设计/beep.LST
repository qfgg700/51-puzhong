C51 COMPILER V9.54   BEEP                                                                  04/24/2019 11:41:37 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE BEEP
OBJECT MODULE PLACED IN beep.OBJ
COMPILER INVOKED BY: D:\KEIL5\C51\BIN\C51.EXE beep.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /************************************************************************  
   2          [ÎÄ¼þÃû]  C51ÒôÀÖ³ÌÐò(°ËÔÂ¹ð»¨)  
   3          [¹¦ÄÜ]    Í¨¹ýµ¥Æ¬»úÑÝ×àÒôÀÖ 
   4          ½ÓÏßËµÃ÷£º
   5          ²Î¿¼·äÃùÆ÷ÊµÑé½ÓÏß 
   6            
   7          /**********************************************************************/   
   8          #include <REG52.H>    
   9          #include <INTRINS.H>    
  10          //±¾Àý¾§ÕñÎª12MHZ    
  11          //¹ØÓÚÈçºÎ±àÖÆÒôÀÖ´úÂë, ÆäÊµÊ®·Ö¼òµ¥,¸÷Î»¿ÉÒÔ¿´ÒÔÏÂ´úÂë.    
  12          //ÆµÂÊ³£Êý¼´ÒôÀÖÊõÓïÖÐµÄÒôµ÷,¶ø½ÚÅÄ³£Êý¼´ÒôÀÖÊõÓïÖÐµÄ¶àÉÙÅÄ;    
  13          //ËùÒÔÄÃ³öÆ××Ó, ÊÔÌ½±à°É!    
  14          
  15          sbit Beep =  P1^5 ; 
  16             
  17          unsigned char n=0;  //nÎª½ÚÅÄ³£Êý±äÁ¿    
  18          unsigned char code music_tab[] ={   
  19          0x18, 0x30, 0x1C , 0x10, //¸ñÊ½Îª: ÆµÂÊ³£Êý, ½ÚÅÄ³£Êý, ÆµÂÊ³£Êý, ½ÚÅÄ³£Êý,    
  20          0x20, 0x40, 0x1C , 0x10,   
  21          0x18, 0x10, 0x20 , 0x10,   
  22          0x1C, 0x10, 0x18 , 0x40,   
  23          0x1C, 0x20, 0x20 , 0x20,   
  24          0x1C, 0x20, 0x18 , 0x20,   
  25          0x20, 0x80, 0xFF , 0x20,   
  26          0x30, 0x1C, 0x10 , 0x18,   
  27          0x20, 0x15, 0x20 , 0x1C,   
  28          0x20, 0x20, 0x20 , 0x26,   
  29          0x40, 0x20, 0x20 , 0x2B,   
  30          0x20, 0x26, 0x20 , 0x20,   
  31          0x20, 0x30, 0x80 , 0xFF,   
  32          0x20, 0x20, 0x1C , 0x10,   
  33          0x18, 0x10, 0x20 , 0x20,   
  34          0x26, 0x20, 0x2B , 0x20,   
  35          0x30, 0x20, 0x2B , 0x40,   
  36          0x20, 0x20, 0x1C , 0x10,   
  37          0x18, 0x10, 0x20 , 0x20,   
  38          0x26, 0x20, 0x2B , 0x20,   
  39          0x30, 0x20, 0x2B , 0x40,   
  40          0x20, 0x30, 0x1C , 0x10,   
  41          0x18, 0x20, 0x15 , 0x20,   
  42          0x1C, 0x20, 0x20 , 0x20,   
  43          0x26, 0x40, 0x20 , 0x20,   
  44          0x2B, 0x20, 0x26 , 0x20,   
  45          0x20, 0x20, 0x30 , 0x80,   
  46          0x20, 0x30, 0x1C , 0x10,   
  47          0x20, 0x10, 0x1C , 0x10,   
  48          0x20, 0x20, 0x26 , 0x20,   
  49          0x2B, 0x20, 0x30 , 0x20,   
  50          0x2B, 0x40, 0x20 , 0x15,   
  51          0x1F, 0x05, 0x20 , 0x10,   
  52          0x1C, 0x10, 0x20 , 0x20,   
  53          0x26, 0x20, 0x2B , 0x20,   
  54          0x30, 0x20, 0x2B , 0x40,   
  55          0x20, 0x30, 0x1C , 0x10,   
C51 COMPILER V9.54   BEEP                                                                  04/24/2019 11:41:37 PAGE 2   

  56          0x18, 0x20, 0x15 , 0x20,   
  57          0x1C, 0x20, 0x20 , 0x20,   
  58          0x26, 0x40, 0x20 , 0x20,   
  59          0x2B, 0x20, 0x26 , 0x20,   
  60          0x20, 0x20, 0x30 , 0x30,   
  61          0x20, 0x30, 0x1C , 0x10,   
  62          0x18, 0x40, 0x1C , 0x20,   
  63          0x20, 0x20, 0x26 , 0x40,   
  64          0x13, 0x60, 0x18 , 0x20,   
  65          0x15, 0x40, 0x13 , 0x40,   
  66          0x18, 0x80, 0x00   
  67          };   
  68             
  69          void int0()  interrupt 1   //²ÉÓÃÖÐ¶Ï0 ¿ØÖÆ½ÚÅÄ    
  70          {  TH0=0xd8;   
  71   1         TL0=0xef;   
  72   1         n--;   
  73   1      }   
  74             
  75          void delay (unsigned char m)   //¿ØÖÆÆµÂÊÑÓÊ±    
  76          {   
  77   1       unsigned i=3*m;   
  78   1       while(--i);   
  79   1      }   
  80             
  81          void delayms(unsigned char a)  //ºÀÃëÑÓÊ±×Ó³ÌÐò    
  82          {   
  83   1        while(--a);                  //²ÉÓÃwhile(--a) ²»Òª²ÉÓÃwhile(a--); ¸÷Î»¿É±àÒëÒ»ÏÂ¿´¿´»ã±à½á¹û¾ÍÖªµÀÁË!   
             - 
  84   1      }   
  85             
  86          void main()   
  87          { unsigned char p,m;   //mÎªÆµÂÊ³£Êý±äÁ¿    
  88   1        unsigned char i=0;   
  89   1        TMOD&=0x0f;   
  90   1        TMOD|=0x01;   
  91   1        TH0=0xd8;TL0=0xef;   
  92   1        IE=0x82;   
  93   1      play:   
  94   1         while(1)   
  95   1          {   
  96   2          a: p=music_tab[i];   
  97   2             if(p==0x00)       { i=0, delayms(1000); goto play;}     //Èç¹ûÅöµ½½áÊø·û,ÑÓÊ±1Ãë,»Øµ½¿ªÊ¼ÔÙÀ´Ò»±é  
             -  
  98   2             else if(p==0xff)  { i=i+1;delayms(100),TR0=0; goto a;}  //ÈôÅöµ½ÐÝÖ¹·û,ÑÓÊ±100ms,¼ÌÐøÈ¡ÏÂÒ»Òô·û    
  99   2                  else         {m=music_tab[i++], n=music_tab[i++];}  //È¡ÆµÂÊ³£Êý ºÍ ½ÚÅÄ³£Êý    
 100   2                   TR0=1;                                             //¿ª¶¨Ê±Æ÷1    
 101   2                 while(n!=0) Beep=~Beep,delay(m);                         //µÈ´ý½ÚÅÄÍê³É, Í¨¹ýP1¿ÚÊä³öÒôÆµ(¿É¶àÉ
             -ùµÀÅ¶!)    
 102   2             TR0=0;                                             //¹Ø¶¨Ê±Æ÷1    
 103   2          }   
 104   1      }  


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    111    ----
   CONSTANT SIZE    =    191    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.54   BEEP                                                                  04/24/2019 11:41:37 PAGE 3   

END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
